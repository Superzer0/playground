name: Run AzureLogin with OIDC

on:
  workflow_dispatch: {}
  push:
      branches:
       - main

permissions:
  id-token: write
  contents: read

jobs:
    deploy-app-service:
      runs-on: ubuntu-latest
      environment: dev
      steps:
        - name: Azure Login
          uses: azure/login@v2
          with:
            client-id: ${{ secrets.AZURE_CLIENT_ID }}
            tenant-id: ${{ secrets.AZURE_TENANT_ID }}
            subscription-id: ${{ secrets.AZURE_SUBSCRIPTION_ID }}
        - name: Azure CLI script
          uses: azure/cli@v2
          with:
            azcliversion: latest
            inlineScript: |
              az account show

